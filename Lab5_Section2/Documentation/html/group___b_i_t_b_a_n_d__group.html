<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lab5_Section2: Bit-band access</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lab5_Section2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___b_i_t_b_a_n_d__group.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Bit-band access</div>  </div>
</div><!--header-->
<div class="contents">

<p>Cortex-M4 bit-band support.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9a575b248b52668f0b37bdfe200fc31c"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga9a575b248b52668f0b37bdfe200fc31c"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga9a575b248b52668f0b37bdfe200fc31c">USBDM::bitbandWrite</a> (T &amp;ref, const int bitNum, uint32_t value)</td></tr>
<tr class="memdesc:ga9a575b248b52668f0b37bdfe200fc31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a value to a bit.  <a href="group___b_i_t_b_a_n_d__group.html#ga9a575b248b52668f0b37bdfe200fc31c">More...</a><br /></td></tr>
<tr class="separator:ga9a575b248b52668f0b37bdfe200fc31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20d7a6c304084c3ae565addb7cd0318a"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga20d7a6c304084c3ae565addb7cd0318a"><td class="memTemplItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga20d7a6c304084c3ae565addb7cd0318a">USBDM::bitbandRead</a> (T &amp;ref, const int bitNum)</td></tr>
<tr class="memdesc:ga20d7a6c304084c3ae565addb7cd0318a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a bit.  <a href="group___b_i_t_b_a_n_d__group.html#ga20d7a6c304084c3ae565addb7cd0318a">More...</a><br /></td></tr>
<tr class="separator:ga20d7a6c304084c3ae565addb7cd0318a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dd849c7d9ee1a8a77e0de38a38bc1f0"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga5dd849c7d9ee1a8a77e0de38a38bc1f0"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga5dd849c7d9ee1a8a77e0de38a38bc1f0">USBDM::bitbandSet</a> (T &amp;ref, const int bitNum)</td></tr>
<tr class="memdesc:ga5dd849c7d9ee1a8a77e0de38a38bc1f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a bit.  <a href="group___b_i_t_b_a_n_d__group.html#ga5dd849c7d9ee1a8a77e0de38a38bc1f0">More...</a><br /></td></tr>
<tr class="separator:ga5dd849c7d9ee1a8a77e0de38a38bc1f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga449f48a69ea4483a5aae09f57f942ace"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga449f48a69ea4483a5aae09f57f942ace"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga449f48a69ea4483a5aae09f57f942ace">USBDM::bitbandClear</a> (T &amp;ref, const int bitNum)</td></tr>
<tr class="memdesc:ga449f48a69ea4483a5aae09f57f942ace"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a bit.  <a href="group___b_i_t_b_a_n_d__group.html#ga449f48a69ea4483a5aae09f57f942ace">More...</a><br /></td></tr>
<tr class="separator:ga449f48a69ea4483a5aae09f57f942ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Cortex-M4 bit-band support. </p>
<p>Based on Freescale Application Note AN4838 <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4838.pdf">http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4838.pdf</a></p>
<p>Assumes the location has been allocated to:</p><ul>
<li>SRAM_U (0x2000_0000-0x200F_FFFF) with bit-band alias (0x2200_0000-0x23FF_FFFF)</li>
<li>AIPS/GPIO (0x4000_0000-0x400F_FFFF) with bit-band alias (0x4200_0000-0x43FF_FFFF)</li>
</ul>
<p>Most Global or Local Static variables end up in SRAM_L so are not usable<br />
Most Parameters and Local variables end up in SRAM_U</p>
<p>Examples:</p>
<p>Write a bit to a register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga9a575b248b52668f0b37bdfe200fc31c">bitbandWrite</a>(<a class="code" href="group___g_p_i_o___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDOR, 3, <span class="keyword">true</span>); <span class="comment">// Set bit # 3 of port</span></div></div><!-- fragment --><p>Set bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga5dd849c7d9ee1a8a77e0de38a38bc1f0">bitbandSet</a>(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Enable clock to PORTA</span></div></div><!-- fragment --><p>Assuming a local variable 'local' </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga449f48a69ea4483a5aae09f57f942ace">bitbandClear</a>(local, 3); <span class="comment">// Clear bit 3 of local</span></div></div><!-- fragment --><p>Note: The efficiency of this operation depends greatly on whether the address is a constant or can be pre-calculated. The code will usually be quite inefficient for local variables as the required address will be calculated each time i.e. the address calculation will overwhelm any advantage of the bitband operation</p>
<p>It is probably a good idea to use a dedicated segment in SRAM_U for bit-band variables and access globally. See linker files.</p>
<p>Fixed locations accessed by casts e.g. GPIOC etc will be very efficient since the calculation is a constant expression.</p>
<p>The generated code will be very inefficient if optimization is not enabled. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga449f48a69ea4483a5aae09f57f942ace"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga449f48a69ea4483a5aae09f57f942ace">&#9670;&nbsp;</a></span>bitbandClear()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void USBDM::bitbandClear </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>bitNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear a bit. </p>
<p>Only the referenced bit is modified.</p>
<p><b>Example</b> - Clear bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga449f48a69ea4483a5aae09f57f942ace">bitbandClear</a>(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Disable clock to PORTA</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ref</td><td>Object to manipulate e.g. a register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitNum</td><td>Bit number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga20d7a6c304084c3ae565addb7cd0318a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20d7a6c304084c3ae565addb7cd0318a">&#9670;&nbsp;</a></span>bitbandRead()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t USBDM::bitbandRead </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>bitNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a bit. </p>
<p>Only the referenced bit is returned.</p>
<p><b>Example</b> - Read value of bit withon a register </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___b_i_t_b_a_n_d__group.html#ga20d7a6c304084c3ae565addb7cd0318a">bitbandRead</a>(<a class="code" href="group___g_p_i_o___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDIR, 3) {</div><div class="line">   <span class="comment">// Only done if bit # 3 of port is high</span></div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ref</td><td>Object to examine e.g. a register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitNum</td><td>Bit number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bit read as boolean value </dd></dl>

</div>
</div>
<a id="ga5dd849c7d9ee1a8a77e0de38a38bc1f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5dd849c7d9ee1a8a77e0de38a38bc1f0">&#9670;&nbsp;</a></span>bitbandSet()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void USBDM::bitbandSet </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>bitNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a bit. </p>
<p>Only the referenced bit is modified.</p>
<p><b>Example</b> - Set bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga5dd849c7d9ee1a8a77e0de38a38bc1f0">bitbandSet</a>(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Enable clock to PORTA</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ref</td><td>Object to manipulate e.g. a register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitNum</td><td>Bit number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9a575b248b52668f0b37bdfe200fc31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9a575b248b52668f0b37bdfe200fc31c">&#9670;&nbsp;</a></span>bitbandWrite()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void USBDM::bitbandWrite </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>bitNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write a value to a bit. </p>
<p>Only the referenced bit is modified.</p>
<p><b>Example</b> - Write value to bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga9a575b248b52668f0b37bdfe200fc31c">bitbandWrite</a>(<a class="code" href="group___g_p_i_o___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDOR, 3, <span class="keyword">true</span>); <span class="comment">// Set bit # 3 of port</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ref</td><td>Object to manipulate e.g. a register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitNum</td><td>Bit number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Value to modify 0 or 1. Only the LSB is used </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Oct 31 2019 16:45:51 for Lab5_Section2 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
